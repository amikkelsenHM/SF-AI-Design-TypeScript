@import 'tailwindcss';

@custom-variant dark (&:is(.dark *));

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Regular.ttf') format('opentype');
  font-weight: 400;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Medium.ttf') format('opentype');
  font-weight: 500;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Bold.ttf') format('opentype');
  font-weight: 700;
}

@font-face {
  font-family: 'NBRegular';
  src: url('/fonts/NBArchitektStd-Regular.otf') format('opentype');
}

@theme {
  /* Font families */
  --font-primary: 'IBM Plex Sans';
  --font-secondary: 'NBRegular';

  /* Font sizes */
  --text-xxs: 9px;
  --text-xxs--line-height: var(--line-height);
  --text-xs: 12px;
  --text-xs--line-height: var(--line-height);
  --text-s: 14px;
  --text-s--line-height: var(--line-height);
  --text-m: 18px;
  --text-m--line-height: var(--line-height);
  --text-l: 23px;
  --text-l--line-height: var(--line-height);
  --text-xl: 28px;
  --text-xl--line-height: var(--line-height);
  --text-2xl: 35px;
  --text-2xl--line-height: var(--line-height);
  --text-3xl: 44px;
  --text-3xl--line-height: var(--line-height);
  --text-4xl: 55px;
  --text-4xl--line-height: var(--line-height);

  /* Colors */
  --color-medium-orchid: var(--brand-medium-orchid);
  --color-deep-purple: var(--brand-deep-purple);
  --color-deep-purple-hover: var(--brand-deep-purple-hover);
  --color-china-pink: var(--brand-china-pink);
  --color-han-blue: var(--brand-han-blue);
  --color-space-gray-from: var(--brand-space-gray-from);
  --color-space-gray-to: var(--brand-space-gray-to);
  --color-storm-gray: var(--brand-storm-gray);
  --color-dark-gray: var(--brand-dark-gray);

  --color-background: var(--background);
  --color-background-contrast: var(--background-contrast);
  --color-background-progress: var(--background-progress);

  --color-foreground: var(--foreground);
  --color-foreground-dark: var(--foreground-dark);
  --color-foreground-contrast: var(--foreground-contrast);
  --color-foreground-progress: var(--foreground-progress);
  --color-foreground-subtle: var(--foreground-subtle);
  --color-foreground-disabled: var(--foreground-disabled);
  --color-disabled: var(--disabled);

  --color-border-light: var(--border-light);
  --color-border-dark: var(--border-dark);
  --color-border-progress: var(--border-progress);
  --color-border-disabled: var(--border-disabled);
  --color-border-focus: var(--border-focus);

  --color-background-error: var(--background-error);
  --color-foreground-error: var(--foreground-error);
  --color-border-error: var(--border-error);
  --color-background-warning: var(--background-warning);
  --color-foreground-warning: var(--foreground-warning);
  --color-border-warning: var(--border-warning);
  --color-background-success: var(--background-success);
  --color-foreground-success: var(--foreground-success);
  --color-border-success: var(--border-success);
  --color-tooltip-background: var(--tooltip-background);

  --color-categorical-1: var(--categorical-1);
  --color-categorical-2: var(--categorical-2);
  --color-categorical-3: var(--categorical-3);
  --color-categorical-4: var(--categorical-4);
  --color-categorical-5: var(--categorical-5);
  --color-categorical-6: var(--categorical-6);
  --color-categorical-7: var(--categorical-7);
  --color-categorical-8: var(--categorical-8);
  --color-categorical-9: var(--categorical-9);
  --color-categorical-10: var(--categorical-10);
  --color-categorical-11: var(--categorical-11);
  --color-categorical-12: var(--categorical-12);
  --color-categorical-13: var(--categorical-13);
  --color-categorical-14: var(--categorical-14);
  --color-categorical-15: var(--categorical-15);

  /* Radiuses */
  --radius-sm: 4px;
  --radius-base: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;

  /* Elevation */
  --shadow-sm: 0px 0px 6px 0px #0000001f;
  --shadow-autofill-progress: 0 0 0 30px var(--background-progress) inset;

  /* Spacing */
  --spacing-13.5: 3.375rem;

  /* Breakpoints */
  --breakpoint-sm: calc(36rem + 1px);
  --breakpoint-md: calc(60rem + 1px);
  --breakpoint-lg: calc(80rem + 1px);
  --breakpoint-xl: calc(112.5rem + 1px);
  --breakpoint-2xl: calc(150rem + 1px);

  /* Animation */
  @keyframes shimmer {
    0% {
      background-position: -200% 0%;
    }
    100% {
      background-position: 200% 0%;
    }
  }

  --animate-collapsible-down: collapsible-down 0.3s ease-out;
  --animate-collapsible-up: collapsible-up 0.3s ease-out;

  @keyframes collapsible-down {
    from {
      height: 0;
      opacity: 0;
    }
    to {
      height: var(--radix-collapsible-content-height);
      opacity: 1;
    }
  }

  @keyframes collapsible-up {
    from {
      height: var(--radix-collapsible-content-height);
      opacity: 1;
    }
    to {
      height: 0;
      opacity: 0;
    }
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    275deg,
    var(--background-progress) 30.31%,
    var(--skeleton-shimmer) 70.05%,
    var(--background-progress) 95.39%
  );
  position: relative;
  overflow: hidden;
}

.skeleton-shimmer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--skeleton-shimmer) 40%,
    var(--skeleton-shimmer) 50%,
    var(--skeleton-shimmer) 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s ease-in-out infinite;
  pointer-events: none;
}

:root {
  --line-height: 120%;

  /* --- ALIGNED TOKENS FROM VANILLA SYSTEM --- */
  
  /* Brand Colors - Primary */
  --color-primary-100: #e9e0fb;
  --color-primary-200: #c9b1f4;
  --color-primary-300: #ac80ed;
  --color-primary-400: #924ae4;
  --color-primary-500: #6b29ae;
  --color-primary-600: #41166d;
  --color-primary-700: #1a0531;

  /* Brand Colors - Secondary */
  --color-secondary-100: #ffecf2;
  --color-secondary-200: #ffbed6;
  --color-secondary-300: #ff7eb6;
  --color-secondary-400: #fb0098;
  --color-secondary-500: #ba0070;
  --color-secondary-600: #7d0049;
  --color-secondary-700: #450026;

  /* Neutral Colors - Grey */
  --color-grey-100: #e5e4e6;
  --color-grey-200: #bdbcc0;
  --color-grey-300: #97959c;
  --color-grey-400: #737079;
  --color-grey-500: #504e55;
  --color-grey-600: #2f2e33;
  --color-grey-700: #111113;
  --color-grey-900: #120B0D;

  /* Tertiary */
  --color-tertiary-100: #fdcfd0;
  --color-tertiary-200: #fb9699;
  --color-tertiary-300: #fa4d56;
  --color-tertiary-400: #ce1628;
  --color-tertiary-500: #8f0c18;
  --color-tertiary-600: #54040a;
  --color-tertiary-700: #2b0103;

  /* Quaternary */
  --color-quaternary-100: #ffd9d9;
  --color-quaternary-200: #ffa0a0;
  --color-quaternary-300: #ff5b5b;
  --color-quaternary-400: #e10000;
  --color-quaternary-500: #9f0000;
  --color-quaternary-600: #620000;
  --color-quaternary-700: #2d0000;

  /* Quinary */
  --color-quinary-100: #76ff9a;
  --color-quinary-200: #00d961;
  --color-quinary-300: #00ad4c;
  --color-quinary-400: #008338;
  --color-quinary-500: #005c25;
  --color-quinary-600: #003713;
  --color-quinary-700: #001504;

  /* Senary */
  --color-senary-100: #ccff6a;
  --color-senary-200: #a2d700;
  --color-senary-300: #82ad00;
  --color-senary-400: #638500;
  --color-senary-500: #465f00;
  --color-senary-600: #2b3c00;
  --color-senary-700: #121b00;

  /* Septenary */
  --color-septenary-100: #ceff0c;
  --color-septenary-200: #abd400;
  --color-septenary-300: #89ab00;
  --color-septenary-400: #688300;
  --color-septenary-500: #4a5d00;
  --color-septenary-600: #2d3a00;
  --color-septenary-700: #131a00;

  /* Octonary */
  --color-octonary-100: #b1fffb;
  --color-octonary-200: #1eeae4;
  --color-octonary-300: #16bfba;
  --color-octonary-400: #0f9692;
  --color-octonary-500: #086e6b;
  --color-octonary-600: #034947;
  --color-octonary-700: #012725;
  
  /* Brand Named Colors - Aliases for Vanilla Compatibility */
  --color-brand-medium-orchid: var(--brand-medium-orchid);
  --color-brand-deep-purple: var(--brand-deep-purple);
  --color-brand-china-pink: var(--brand-china-pink);
  --color-brand-grey-purple: #674A86;
  --color-brand-han-blue: var(--brand-han-blue);
  --color-brand-bright-blue: #1686E8;

  /* Typography - Font Families (Vanilla Compat) */
  --font-family-ibm-plex-sans: "IBM Plex Sans", sans-serif;
  --font-family-nb-architekt: "NB Architekt Std", sans-serif;
  --font-family-helvetica: "Helvetica", sans-serif;

  /* Typography - Font Weights (Vanilla Compat) */
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-bold: 700;

  /* Typography - Font Sizes (Vanilla Compat) */
  --font-size-8: 8px;
  --font-size-10: 10px;
  --font-size-12: 12px;
  --font-size-14: 14px;
  --font-size-16: 16px;
  --font-size-18: 18px;
  --font-size-28: 28px;
  --font-size-35: 35px;
  --font-size-36: 36px;
  --font-size-55: 55px;

  /* Typography - Line Heights (Vanilla Compat) */
  --line-height-10: 10px;
  --line-height-12: 12px;
  --line-height-13: 13px;
  --line-height-14: 14px;
  --line-height-17: 17px;
  --line-height-18: 18px;
  --line-height-22: 22px;
  --line-height-25: 25px;
  --line-height-34: 34px;
  --line-height-40: 40px;
  --line-height-42: 42px;
  --line-height-55: 55px;

  /* Typography - Letter Spacing (Vanilla Compat) */
  --letter-spacing-neg-5: -0.2px;
  --letter-spacing-0: 0px;

  /* UI Colors - Vanilla Compatibility Aliases */
  --color-surface-dark: var(--background);
  --color-surface-dark-contrast: var(--background-contrast);
  --color-surface-dark-progress: var(--background-progress);
  --color-surface-light: #FFFFFF;
  
  --color-on-surface-dark: var(--foreground);
  --color-on-surface-light: #222222;
  --color-on-surface-dark-contrast: var(--foreground-contrast);
  --color-on-surface-dark-subtle: var(--foreground-subtle);
  --color-on-surface-dark-disabled: var(--foreground-disabled);

  --color-border-on-dark: var(--border-on-dark, #EEEEEE);
  --color-border-on-dark-contrast: var(--border-on-dark-contrast, #36274A);
  --color-border-on-dark-subtle: var(--border-dark); /* Mapping to existing border dark */
  
  /* Data Visualization - Vanilla Compatibility */
  --color-dataviz-1: var(--categorical-1);
  --color-dataviz-2: var(--categorical-2);
  --color-dataviz-3: var(--categorical-3);
  --color-dataviz-4: var(--categorical-4);
  --color-dataviz-5: var(--categorical-5);
  --color-dataviz-6: var(--categorical-6);
  --color-dataviz-7: var(--categorical-7);
  --color-dataviz-8: var(--categorical-8);
  --color-dataviz-9: var(--categorical-9);
  --color-dataviz-10: var(--categorical-10);
  --color-dataviz-11: var(--categorical-11);
  --color-dataviz-12: var(--categorical-12);
  --color-dataviz-13: var(--categorical-13);
  --color-dataviz-14: var(--categorical-14);
  --color-dataviz-15: var(--categorical-15);

  /* TODO: not all colors for light theme are available */
  /* Brand colors */
  --brand-medium-orchid: #cf8bff;
  --brand-deep-purple: #6b29ae;
  --brand-deep-purple-hover: #883ed4;
  --brand-china-pink: #d8749d;
  --brand-han-blue: #5865c6;
  --brand-space-gray-from: #a3a3a3;
  --brand-space-gray-to: #d7d7d7;
  --brand-storm-gray: #78797a;
  --brand-dark-gray: #3f4044;

  /* UI/Surface */
  --background: #eeeeee;
  --background-contrast: #f5f5f5;
  --background-progress: #b6b6b6;

  /* UI/On Surface */
  --foreground: #222222;
  --foreground-contrast: #382c47;
  --foreground-progress: #ffffff;
  --foreground-disabled: #d9d9d9;
  --disabled: #b1b1b1;

  /* UI/Border */
  --border-light: #b6b6b6;
  --border-dark: #1a1520;
  --border-progress: #f5f5f5;
  --border-disabled: #e6e6e6;
  --border-focus: #1686e8;

  /* Semantics */
  --background-error: #cf0019;
  --foreground-error: #ff8594;
  --border-error: #7f000f;
  --background-warning: #dcaa00;
  --foreground-warning: #ffdb62;
  --border-warning: #654e00;
  --background-success: #00b55f;
  --foreground-success: #b0ffb8;
  --border-success: #057023;
  --tooltip-background: #674a86;

  /* Categorical (Data Visualizations) */
  --categorical-1: #8a3ffc;
  --categorical-2: #5a3cd3;
  --categorical-3: #fb01ff;
  --categorical-4: #ff7eb6;
  --categorical-5: #fa4d56;
  --categorical-6: #ffd9d9;
  --categorical-7: #76ff9a;
  --categorical-8: #82ad00;
  --categorical-9: #ceff0c;
  --categorical-10: #086e6b;
  --categorical-11: #19fcf8;
  --categorical-12: #87d3ff;
  --categorical-13: #b98c00;
  --categorical-14: #ffe100;
  --categorical-15: #fffb83;
  --sidebar: var(--background);
  --sidebar-foreground: var(--foreground);
  --sidebar-primary: var(--brand-medium-orchid);
  --sidebar-primary-foreground: var(--foreground);
  --sidebar-accent: var(--foreground-contrast);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
}

.dark {
  /* Brand colors */
  --brand-medium-orchid: #cf8bff;
  --brand-deep-purple: #6b29ae;
  --brand-deep-purple-hover: #883ed4;
  --brand-china-pink: #d8749d;
  --brand-han-blue: #5865c6;
  --brand-space-gray-from: #a3a3a3;
  --brand-space-gray-to: #d7d7d7;
  --brand-storm-gray: #78797a;
  --brand-dark-gray: #3f4044;

  /* UI/Surface */
  --background: #100919;
  --background-contrast: #292134;
  --background-progress: #312a39;

  /* UI/On Surface */
  --foreground: #eeeeee;
  --foreground-dark: #222222;
  --foreground-contrast: #36274a;
  --foreground-subtle: #1d1825;
  --foreground-disabled: #525252;

  /* UI/Border */
  --border-light: #b6b6b6;
  --border-dark: #1a1520;
  --border-progress: #383048;
  --border-disabled: #e6e6e6;
  --border-focus: #1686e8;

  /* Semantics */
  --background-error: #cf0019;
  --foreground-error: #ff8594;
  --border-error: #7f000f;
  --background-warning: #dcaa00;
  --foreground-warning: #ffdb62;
  --border-warning: #654e00;
  --background-success: #00b55f;
  --foreground-success: #b0ffb8;
  --border-success: #057023;
  --tooltip-background: #674a86;

  /* Categorical (Data Visualizations) */
  --categorical-1: #8a3ffc;
  --categorical-2: #5a3cd3;
  --categorical-3: #fb01ff;
  --categorical-4: #ff7eb6;
  --categorical-5: #fa4d56;
  --categorical-6: #ffd9d9;
  --categorical-7: #76ff9a;
  --categorical-8: #82ad00;
  --categorical-9: #ceff0c;
  --categorical-10: #086e6b;
  --categorical-11: #19fcf8;
  --categorical-12: #87d3ff;
  --categorical-13: #b98c00;
  --categorical-14: #ffe100;
  --categorical-15: #fffb83;

  /* Animation colors */
  --skeleton-shimmer: #47375ca6;

  --animate-collapsible-down: collapsible-down 0.2s ease-out;
  --animate-collapsible-up: collapsible-up 0.2s ease-out;
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
}

@layer base {
  * {
    @apply border-foreground;

    &::-webkit-scrollbar {
      @apply w-2 h-2;
    }

    &::-webkit-scrollbar-track {
      @apply bg-background-progress;
    }

    &::-webkit-scrollbar-thumb {
      @apply bg-foreground-contrast rounded-xl border-3 border-background-progress transition-colors hover:bg-medium-orchid;
    }
  }
  body {
    @apply bg-background text-foreground font-normal tracking-normal font-primary!; /* using important to override material UI font family*/
  }

  .leaflet-div-icon {
    @apply bg-transparent! border-none! w-auto! h-auto!;
  }
}

@utility bg-space-gray {
  @apply bg-linear-180 from-space-gray-from to-space-gray-to;
}

@utility typography-display-sm {
  --tw-leading: 100%;
  @apply text-2xl font-secondary;
}

@utility typography-display-lg {
  --tw-leading: 100%;
  @apply text-4xl capitalize;
}

@utility typography-heading-lg {
  @apply text-2xl capitalize;
}

@utility typography-heading-md {
  @apply text-xl;
}

@utility typography-heading-sm {
  @apply text-m;
}

@utility typography-overline-lg {
  --tw-leading: 110%;
  @apply text-2xl tracking-tighter font-secondary uppercase;
}

@utility typography-overline-md {
  --tw-leading: 110%;
  @apply text-m tracking-[0.012em] font-secondary uppercase;
}

@utility typography-body-lg {
  --tw-leading: 140%;
  @apply text-m;
}

@utility typography-body-sm {
  --tw-leading: 140%;
  @apply text-xs;
}

@utility typography-body-bold-lg {
  @apply text-m font-bold;
}

@utility typography-body-bold-sm {
  @apply text-xs font-bold;
}

@utility typography-cta-lg {
  @apply text-m font-medium capitalize;
}

@utility typography-cta-sm {
  @apply text-xs font-medium capitalize;
}

@utility typography-link-lg {
  @apply text-m text-border-focus;
}

@utility typography-link-sm {
  @apply text-xs text-border-focus;
}

@utility typography-label {
  --tw-leading: 140%;
  @apply text-xxs;
}

@utility typography-label-bold {
  @apply text-xxs font-bold;
}

@utility typography-helper {
  --tw-leading: 130%;
  @apply text-xxs;
}

@utility typography-footnote {
  --tw-leading: 140%;
  @apply text-xxs;
}

@utility no-scrollbar {
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
}
